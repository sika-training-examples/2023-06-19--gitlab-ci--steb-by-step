# .gitlab-ci.yml

variables:
  MY_GLOBAL: global

job1:
  script: env | grep MY

job2:
  variables:
    MY_LOCAL: local
  script: env | grep MY

job3:
  variables:
    MY_FOO: foo
    MY_BAR: bar
    MY_FOO_BAR: $MY_FOO-$MY_BAR
  script: env | grep MY

job4:
  variables:
    TAG: $CI_COMMIT_REF_SLUG-$CI_COMMIT_SHORT_SHA-$CI_PIPELINE_ID
    IMAGE: $CI_REGISTRY_IMAGE:$TAG
    BASE_HOST: sikademo.com
    HOST: $CI_PROJECT_PATH_SLUG-$CI_COMMIT_REF_SLUG.$BASE_HOST
  script:
    - echo docker build . -t $IMAGE
    - echo helm install ... --set host=$HOST