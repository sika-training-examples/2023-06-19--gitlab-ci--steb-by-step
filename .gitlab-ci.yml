# .gitlab-ci.yml

stages:
  - build
  - test

build:
  stage: build
  parallel:
    matrix:
      - GOOS:
          - linux
          - darwin
          - windows
        GOARCH:
          - amd64
          - arm64
      - GOOS:
          - linux
        GOARCH:
          - '386'
  artifacts:
    paths:
      - hello-${GOOS}-${GOARCH}
  variables:
    CGO_ENABLED: '0' 
  script:
    - go build -o hello-${GOOS}-${GOARCH} main.go
  tags:
    - linux

test:
  stage: test
  script:
    - ./hello-linux-amd64

test32:
  stage: test
  script:
    - ./hello-linux-386